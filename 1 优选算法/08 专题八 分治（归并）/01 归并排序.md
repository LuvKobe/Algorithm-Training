### 1. 题目链接

[912. 排序数组](https://leetcode.cn/problems/sort-an-array/description/)


### 2. 解法（归并排序）

**算法思路：**

归并排序的流程充分体现了「分而治之」的思想，大体过程分为两步：
- 分：将数组一分为二为两部分，一直分解到数组的长度为 1，使整个数组的排序过程被分为「左半部分排序」+「右半部分排序」；
- 治：将两个较短的「有序数组合并成一个长的有序数组」，一直合并到最初的长度。


**如下图所示：**

![Alt text](./01%20image/image.png)


### 3. 算法代码

```cpp
class Solution 
{
    // 定义一个全局数组
    vector<int> tmp;
public:
    vector<int> sortArray(vector<int>& nums) 
    {
        tmp.resize(nums.size());
        mergeSort(nums, 0, nums.size() - 1);
        return nums;
    }
    void mergeSort(vector<int>& nums, int left, int right)
    {
        // 处理边界
        if (left >= right) return;

        // 1. 选择中间点划分区间
        // [left, mid] [mid + 1, right]
        int mid = (left + right) >> 1;

        // 2. 把左右区间排序
        mergeSort(nums, left, mid);
        mergeSort(nums, mid + 1, right);

        // 3. 合并两个有序数组
        int cur1 = left;
        int cur2 = mid + 1;
        int i = 0;
        while (cur1 <= mid && cur2 <= right)
        {
            tmp[i++] = nums[cur1] < nums[cur2] ? nums[cur1++] : nums[cur2++];
        }

        // 3.1 处理没有遍历完的数组
        while (cur1 <= mid) tmp[i++] = nums[cur1++];
        while (cur2 <= right) tmp[i++] = nums[cur2++];

        // 3.2 还原数组
        for (int i = left; i <= right; i++)
            nums[i] = tmp[i - left];
    }
};
```



**代码逻辑逐行解释**

```cpp
for (int i = left; i <= right; i++)
    nums[i] = tmp[i - left];
```

- `i` 遍历的是 **当前需要还原的区间**：从 `left` 到 `right`，只处理这个区间内的元素，不碰区间外的部分。
- `i - left` 是 `tmp` 数组的偏移量：因为 `tmp` 里存储的是当前区间 `[left, right]` 合并后的结果，且是从 `tmp[0]` 开始存的。比如：
  - 当处理区间 `[0,1]` 时，`i=0` → `0-0=0`（取tmp[0]），`i=1` → `1-0=1`（取tmp[1]）；
  - 当处理区间 `[2,3]` 时，`i=2` → `2-2=0`（取tmp[0]），`i=3` → `3-2=1`（取tmp[1]）；
  - 当处理区间 `[0,3]` 时，`i=0` → `0-0=0`，`i=3` → `3-0=3`（刚好覆盖整个tmp）。

**总结：**
- 归并排序的核心是分治处理**局部区间**，每一次合并只负责当前 `[left, right]` 区间的有序化，`tmp` 只存储该区间的有序结果，而非整个数组，因此只能还原到对应区间，不能覆盖整个数组。
- 如果遍历整个数组长度赋值，会把 `tmp` 中未赋值的初始值覆盖到原数组的其他区间，破坏未处理的数据，导致排序结果错误。
- **偏移量 `i-left`**：保证 `tmp` 中从0开始存储的当前区间数据，能精准对应到原数组的 `[left, right]` 区间。
